(this["webpackJsonpreact-reserver-example"]=this["webpackJsonpreact-reserver-example"]||[]).push([[0],{16:function(e,t,n){e.exports=n(30)},17:function(e,t,n){},22:function(e,t,n){},23:function(e,t,n){},30:function(e,t,n){"use strict";n.r(t);n(17);var l=n(0),o=n.n(l),a=n(14),i=n.n(a),r=n(1),c=n(3),s=n(7),d=n(2),u="_style__row_cell__3TtXw",m="_style__row__32f2G";function b(e=15){let t="";const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";for(let l=0;l<e;l++)t+=n.charAt(Math.floor(Math.random()*n.length));return t}const g=(e,t,n)=>{const l=n>=e&&t>=n;return l&&console.log(e,t,n),l};function p(e){return!(!Number.isInteger(e)||e<0)}function h(e,t,n,l){return{left:e+n*l,top:(t+1)*l}}function E(e,t){return e.filter(e=>e.editing).map(e=>{const n=function(e,t){if(!p(e.column))throw new Error("firstPosition.column expected an integer received ".concat(e.column));if(!p(e.row))throw new Error("firstPosition.row expected an integer received ".concat(e.row));if(!p(t.column))throw new Error("secondPosition.column expected an integer received ".concat(t.column));return{row:e.row,column:e.column,length:t.column-e.column+1}}({column:e.column,row:e.row},t.cell);return Object(r.a)(Object(r.a)({},e),n)})}const f={add:"ADD",edit:"EDIT",delete:"DELETE",addToEditing:"ADD_TO_EDITING",doneEditing:"DONE_EDITING",setBars:"SET_BARS"};const O=(e,t)=>((e=w(e)).collisions[t.id]="",(t=w(t)).collisions[e.id]="",[e,t]),w=e=>(e.collisions||(e.collisions={}),e),y=(e,t)=>(delete(e=w(e)).collisions[t.id],delete(t=w(t)).collisions[e.id],[e,t]);function j(e,t){switch(t.type){case f.edit:{const n=[...e.bars],l=n.findIndex(e=>t.payload.id===e.id),o=[...n];o.splice(l,1);const a=function(e,t){let n=Object(r.a)({},t);return[e.map(e=>{if(n.row!==e.row){const t=y(e,n),l=Object(c.a)(t,2),o=l[0],a=l[1];return n=a,o}{const t=e.column+1,l=n.column+1,o=e.column+e.length,a=n.column+n.length;if(g(t,o,l)||g(t,o,a)||g(l,a,o)||g(l,a,t)){const t=O(e,n),l=Object(c.a)(t,2),o=l[0],a=l[1];return n=a,o}}return e}),n]}(o,t.payload),i=Object(c.a)(a,2),s=i[0],d=i[1];return s.push(d),Object(r.a)(Object(r.a)({},e),{},{bars:s})}case f.add:{const n=[...e.bars];return n.push(t.payload),Object(r.a)(Object(r.a)({},e),{},{bars:n,isEditing:!0})}case f.setBars:return Object(r.a)(Object(r.a)({},e),{},{bars:t.payload.bars});case f.delete:{const n=[...e.bars],l=n.findIndex(e=>t.payload.id===e.id);return n.splice(l,1),Object(r.a)(Object(r.a)({},e),{},{bars:n})}case f.doneEditing:if(e.isEditing){let t=[...e.bars];return t=t.map(e=>{if(e.editing){const t=Object(r.a)({},e.style);return t.pointerEvents="auto",Object(r.a)(Object(r.a)({},e),{},{editing:!1,style:t})}return e}),Object(r.a)(Object(r.a)({},e),{},{bars:t,isEditing:!1})}return e;case f.mouseDragOver:return Object(r.a)({},e);default:return console.log("Unhandled type: ".concat(t.type)),e}}function v(e){return o.a.createElement("div",{role:"listitem",onDragStart:e.onDragStart,onClick:t=>{e.onClick(t,e)},onMouseOver:t=>{e.onMouseOver(t,e)},onContextMenu:t=>{e.onContextMenu(t)},draggable:e.draggable,style:Object(r.a)(Object(r.a)({},e.style),{},{display:"flex",position:"absolute",zIndex:e.zIndex||"100"}),className:e.className},[...Array(e.length&&e.length>0?e.length:1)].map((t,n)=>o.a.createElement("div",{key:n,style:{width:e.dimension,height:e.dimension,pointerEvents:e.style.pointerEvents}})),e.children)}function x(e){const t=Object(l.useState)([]),n=Object(c.a)(t,2),a=n[0],i=n[1];return Object(l.useEffect)(()=>{"function"===typeof e.headRow?i(e.headRow(e.columnCount)):Array.isArray(e.headRow)&&i(e.headRow)},[e.headRow,e.columnCount]),o.a.createElement("div",{role:"columnheader",style:{height:e.dimension,display:"flex"}},o.a.createElement("div",{className:u,style:{width:e.rowTitleWidth,height:e.dimension+"px"}}),a.map((t,n)=>o.a.createElement("div",{"aria-colindex":n,key:n,style:{width:e.dimension+"px",height:e.dimension+"px"},className:u},t)))}function C(e){const t=Object(l.useState)([]),n=Object(c.a)(t,2),a=n[0],i=n[1],s=Object(l.useState)(0),d=Object(c.a)(s,2),b=d[0],g=d[1],p=Object(l.useState)(0),h=Object(c.a)(p,2),E=h[0],f=h[1];return Object(l.useEffect)(()=>{var t,n,l;f((t=e.dimension,n=e.width,l=e.rowTitleWidth,Math.floor((n-l)/t)))},[e.width,e.dimension]),Object(l.useEffect)(()=>{var t,n;g((t=e.dimension,n=e.height,Math.floor(n/t)))},[e.height,e.dimension]),Object(l.useEffect)(()=>{"function"===typeof e.rowTitles?i(e.rowTitles()):Array.isArray(e.rowTitles)&&i(e.rowTitles)},[e.rowTitles]),o.a.createElement("div",{role:"grid",onMouseLeave:e.mouseLeaveGrid,style:Object(r.a)(Object(r.a)({},e.style),{},{position:"relative"})},o.a.createElement(x,{headRow:e.headRow,columnCount:E,rowTitleWidth:e.rowTitleWidth,dimension:e.dimension}),[...Array(b)].map((t,n)=>o.a.createElement("div",{role:"rowgroup",className:m,key:n,style:{height:e.dimension,display:"flex"}},o.a.createElement("div",{className:u,style:{width:e.rowTitleWidth,height:e.dimension+"px"}},a[n]),[...Array(E)].map((t,l)=>o.a.createElement("div",{role:"gridcell","aria-colindex":l,onDragOver:t=>{t.preventDefault(),e.mouseDragOverCell({cell:{row:n,column:l}},t)},className:u,onMouseEnter:t=>{e.mouseEnterCell({dimension:e.dimension,cell:{row:n,column:l}},t)},onMouseDown:t=>{e.mouseDownCell({dimension:e.dimension,cell:{row:n,column:l}},t)},onMouseUp:t=>{e.mouseUpCell({cell:{row:n,column:l}},t)},onDrop:t=>{e.mouseCellDrop({cell:{row:n,column:l}},t)},style:{width:e.dimension+"px",height:e.dimension+"px"},key:l},e.content["r".concat(n,"c").concat(l)])))),o.a.createElement("div",{role:"list"},"function"===typeof e.children&&e.children({rowCount:b,columnCount:E,rowTitleWidth:e.rowTitleWidth,dimension:e.dimension})))}v.defaultProps={dimension:20,onClick:()=>{},onMouseOver:()=>{},onDragStart:()=>{},onContextMenu:()=>{}},C.defaultProps={initBars:[],bars:[],tags:[],headRow:[],rowTitles:[],content:{},dimension:20,width:500,height:500,rowTitleWidth:0,mouseEnterCell:()=>{},mouseDownCell:()=>{},mouseUpCell:()=>{},mouseDragOverCell:()=>{},mouseCellDrop:()=>{},mouseLeaveGrid:()=>{}};var D=C;function T(e){return o.a.createElement(D,null)}function k(e){return o.a.createElement("div",{className:e.className,style:{display:e.visible?"block":"none",position:"absolute",left:e.left,top:e.top,zIndex:e.zIndex||1e4}},o.a.createElement("ul",null,"  ",e.children))}const S=e=>o.a.createElement("li",{onClick:e.onClick},e.children);k.defaultProps={visible:!1,left:0,top:0};const M=[{draggable:!0,id:"xx",length:13,row:2,column:8,className:"default-bar",children:"This is a tag"},{id:"xy",length:4,row:5,column:12,style:{background:"red"}}];n(22),n(23),n(24);var N=()=>{Object(l.useEffect)(()=>{console.log(M)},[]);const e=Object(l.useState)({r0c0:o.a.createElement("span",{style:{background:"green",width:"20px",height:"20px",display:"block"}}),r2c1:o.a.createElement("span",{style:{fontSize:"10px"}},"150")}),t=Object(c.a)(e,2),n=t[0],a=t[1],i=Object(l.useState)(["Golf Cart 1",null,"Golf Cart 2"]),u=Object(c.a)(i,2),m=u[0],g=u[1],p=function(e,t){const n=Object(l.useReducer)(e,{bars:t,isEditing:!1}),o=Object(c.a)(n,2),a=o[0],i=a.bars,r=a.isEditing,s=o[1];return{bars:i,isEditing:r,addBar:e=>s({payload:e,type:f.add}),editBar:e=>s({payload:e,type:f.edit}),doneEditing:e=>s({type:f.doneEditing}),deleteBar:e=>s({payload:e,type:f.delete}),addToEditing:e=>s({payload:e,type:f.addToEditing})}}(j,M),O=p.addBar,w=p.editBar,y=p.doneEditing,x=p.deleteBar,C=p.bars,N=Object(l.useState)({}),I=Object(c.a)(N,2),_=I[0],B=I[1],A=Object(l.useState)({visibile:!1,top:0,left:0}),R=Object(c.a)(A,2),W=R[0],G=R[1],P=Object(l.useState)(80),z=Object(c.a)(P,1)[0],L=Object(l.useState)(500),U=Object(c.a)(L,1)[0],J=Object(l.useState)(25),X=Object(c.a)(J,1)[0];return o.a.createElement(s.a,{basename:"/"},o.a.createElement("div",{style:{display:"flex"}},o.a.createElement("ul",{style:{padding:"20px",display:"flex",flex:1,flexDirection:"column"}},o.a.createElement("li",null," ",o.a.createElement(s.b,{to:"/"},"Start Here")),o.a.createElement("li",null,o.a.createElement(s.b,{to:"/basic"},"Basic")),o.a.createElement("li",null,o.a.createElement(s.b,{to:"/full"},"Full"))),o.a.createElement("div",{style:{flex:5}},o.a.createElement(d.c,null,o.a.createElement(d.a,{path:"/full"},o.a.createElement(D,{style:{display:"inline-block"},rowTitles:()=>m.map((e,t)=>null===e?null:o.a.createElement("button",{onClick:()=>{let e=[...m];e.push("asd"),g(e)},style:{background:"orange"}},t+1,e)),rowTitleWidth:z,headRow:e=>{console.log();for(var t=[],n=new Date,l=0;l<e;l++){var o=n.getDate();t.push(o),n.setDate(o+1)}return t},mouseLeaveGrid:()=>{y()},mouseUpCell:e=>{let t=Object(r.a)({},n);t["r".concat(e.cell.row,"c").concat(e.cell.column)]=o.a.createElement("div",{style:{background:"purple"}},"test"),a(t),y()},mouseEnterCell:e=>{E(C,e).forEach(e=>{w(e)})},mouseDownCell:e=>{console.log(e);let t=function(e,t){return Object(r.a)(Object(r.a)({id:b(),dimension:e,style:{background:"orange",pointerEvents:"none"},editing:!0},t),{},{length:1})}(e.dimension,e.cell);O(t)},mouseCellDrop:e=>{!function(e){let t=C.filter(e=>e.editing);console.log(t),t.forEach(t=>{console.log("move",e);let n=Object(r.a)(Object(r.a)(Object(r.a)({},t),e),{},{editing:!1});console.log("n",n),w(n)})}(e.cell)},width:document.documentElement.clientWidth,height:U,content:n,dimension:X,mouseDragOverCell:e=>{var t;t=e.cell,C.filter(e=>e.dragging).forEach(e=>{let n=Object(r.a)(Object(r.a)(Object(r.a)({},e),t),{},{editing:!1});w(n)})}},({rowCount:e,rowTitleWidth:t,dimension:n})=>C.map(l=>e>l.row&&o.a.createElement(v,Object.assign({key:l.id},l,{dimension:n,onDragStart:()=>{w(Object(r.a)(Object(r.a)({},l),{},{dragging:!0}))},onContextMenu:e=>{e.preventDefault(),B(l),G({visible:!0,top:e.clientY,left:e.clientX})},onMouseOver:()=>{},style:Object(r.a)(Object(r.a)({},l.style),h(t,l.row,l.column,n))}),o.a.createElement("span",{style:{position:"absolute"}},l.children,l.collisions&&Object.keys(l.collisions).length>0&&o.a.createElement("span",null,"Collision detected"))))),o.a.createElement(k,Object.assign({className:"cmenu"},W),o.a.createElement(S,{onClick:()=>{w(Object(r.a)(Object(r.a)({},_),{},{draggable:!_.draggable})),G({visibile:!1})}},_.draggable?"Disable":"Enable"," Drag"),o.a.createElement(S,{onClick:()=>{x(_),G({visibile:!1})}},"Delete"))),o.a.createElement(d.a,{path:"/basic"},o.a.createElement(T,null)),o.a.createElement(d.a,{path:"/"},"In the beginning there was darkness")))))};i.a.render(o.a.createElement(N,null),document.getElementById("root"))}},[[16,1,2]]]);
//# sourceMappingURL=main.66453a38.chunk.js.map