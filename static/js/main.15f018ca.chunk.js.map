{"version":3,"sources":["../../src/helpers.js","../../src/actionTypes.js","../../src/reserverReducer.js","../../src/Bar.js","../../src/Head.js","../../src/index.js","testData.js","App.js","../../src/useReserver.js","index.js"],"names":["makeId","length","text","possible","i","Math","actionTypes","add","edit","delete","addToEditing","doneEditing","reserverReducer","state","action","nBars","bIndex","bar","bars","isEditing","editing","pointerEvents","console","Bar","props","onDragStart","onClick","onMouseOver","draggable","style","top","left","display","position","zIndex","className","Array","key","width","height","Head","useState","headRow","setHeadRow","useEffect","styles","Reserver","rowTitles","setRowTitles","rowCount","setRowCount","columnCount","setColumnCount","dimension","onMouseLeave","id","rowTitleWidth","onDragOver","e","cell","row","column","c","onMouseEnter","onMouseDown","onMouseUp","onDrop","initBars","tags","content","mouseEnterCell","mouseDownCell","mouseUpCell","mouseDragOverCell","mouseCellDrop","mouseLeaveGrid","children","background","App","fontSize","setContent","titles","setTitles","reducer","initialState","useReducer","dispatch","addBar","payload","type","editBar","deleteBar","useReserver","testBars","widthtitle","gDate","useRef","Date","map","ntitles","push","z","x","y","getDate","setDate","tcontent","firstPosition","secondPosition","nPosition","newLocation","resizeBar","log","current","getUTCDate","newbar","createBar","filter","forEach","n","document","documentElement","clientWidth","titleWidth","getPosition","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.15f018ca.chunk.js","sourcesContent":["import React, { useRef, useEffect, useState } from 'react';\r\n\r\nexport function isObject(item) {\r\n  return (typeof item === \"object\" && !Array.isArray(item) && item !== null);\r\n}\r\n\r\nexport function usePrevious(value) {\r\n  // The ref object is a generic container whose current property is mutable ...\r\n  // ... and can hold any value, similar to an instance property on a class\r\n  const ref = useRef();\r\n\r\n  // Store current value in ref\r\n  useEffect(() => {\r\n    ref.current = value;\r\n  }, [value]); // Only re-run if value changes\r\n\r\n  // Return previous value (happens before update in useEffect above)\r\n  return ref.current;\r\n}\r\n\r\nexport function makeId(length = 15) {\r\n  let text = \"\";\r\n  const possible = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789\";\r\n\r\n  for (let i = 0; i < length; i++)\r\n    text += possible.charAt(Math.floor(Math.random() * possible.length));\r\n\r\n  return text;\r\n\r\n}\r\n\r\nexport function evaluatePosition(firstPosition, secondPosition) {\r\n\r\n    \r\n  return { row: firstPosition.row, column: firstPosition.column, length: secondPosition.column - firstPosition.column + 1 }\r\n\r\n\r\n}\r\n\r\nexport   function getPosition(titleWidth, row, column, dimension) {\r\n\r\n  let position = { left: titleWidth + column * dimension, top: (row + 1) * dimension }\r\n  \r\n  return position\r\n}\r\n\r\n\r\nexport function getColumnCount(dimension, width,rowTitleWidth) {\r\n  \r\n  return Math.floor((width-rowTitleWidth) / dimension);\r\n}\r\n\r\nexport function getRowCount(dimension,height){\r\n  return Math.floor(height / dimension);\r\n}\r\n\r\n\r\nexport function resizeBar(editBar,bars,newLocation) {\r\n\r\n  let editing = bars.filter((bar) => {\r\n    return bar.editing;\r\n  })\r\n\r\n  editing.forEach((bar) => {\r\n    \r\n    let nPosition = evaluatePosition({ column: bar.column, row: bar.row }, newLocation.cell)\r\n    editBar({ ...bar, ...nPosition })\r\n  })\r\n\r\n\r\n}"," const actionTypes = {\r\n\r\n    add: 'ADD',\r\n    edit: 'EDIT',\r\n    delete: 'DELETE',\r\n    addToEditing:'ADD_TO_EDITING',\r\n    doneEditing: 'DONE_EDITING',\r\n\r\n}\r\n\r\nexport default actionTypes;","import actionTypes from './actionTypes'\r\nimport { makeId, evaluatePosition } from './helpers'\r\nexport default function reserverReducer(state, action) {\r\n    switch (action.type) {\r\n\r\n        case actionTypes.edit: {\r\n            let nBars = [...state.bars];\r\n            let bIndex = nBars.findIndex(bar => { return action.payload.id === bar.id });\r\n            nBars[bIndex] = action.payload;\r\n            return { ...state, bars: nBars };\r\n\r\n        }\r\n\r\n        case actionTypes.add: {\r\n\r\n\r\n            let bars = [...state.bars];\r\n\r\n            bars.push(action.payload)\r\n\r\n\r\n\r\n            return { ...state, bars: bars, isEditing: true };\r\n        }\r\n\r\n        case actionTypes.delete: {\r\n\r\n            let nBars = [...state.bars];\r\n            let bIndex = nBars.findIndex(bar => { return action.payload.id === bar.id });\r\n\r\n            nBars.splice(bIndex, 1);\r\n\r\n\r\n\r\n            return { ...state, bars: nBars };\r\n        }\r\n        case actionTypes.doneEditing: {\r\n            if (state.isEditing) {\r\n                let nBars = [...state.bars];\r\n                nBars = nBars.map((bar) => {\r\n                    if (bar.editing) {\r\n\r\n                        return { ...bar, editing: false, pointerEvents: \"auto\" };\r\n                    }\r\n                    return bar;\r\n\r\n\r\n                })\r\n\r\n                return { ...state, bars: nBars, isEditing: false };\r\n            }\r\n\r\n            return state;\r\n        }\r\n\r\n        case actionTypes.mouseDragOver: {\r\n\r\n\r\n            return { ...state };\r\n        }\r\n\r\n        default: {\r\n\r\n            console.log(`Unhandled type: ${action.type}`)\r\n            return state;\r\n        }\r\n    }\r\n}","import React from 'react';\r\n\r\nexport default function Bar(props) {\r\n\r\n    return (<div onDragStart={props.onDragStart}\r\n        onClick={() => { props.onClick(props) }}\r\n        onMouseOver={() => { props.onMouseOver(props) }}\r\n        draggable={props.draggable}\r\n        style={{ ...props.style, top: props.top, left: props.left, display: \"flex\", position: \"absolute\", zIndex: props.zIndex || \"100\", pointerEvents: props.pointerEvents }}\r\n        className={props.className} >\r\n        {\r\n            [...Array((props.length && props.length > 0) ? props.length : 1)].map((notUsed, i) => {\r\n                return <div key={i} style={{ width: props.dimension, height: props.dimension, pointerEvents: props.pointerEvents }}></div>\r\n            })\r\n        }\r\n        {props.children}\r\n\r\n\r\n    </div>)\r\n\r\n}\r\n\r\nBar.defaultProps = {\r\n    dimension: 20,\r\n    onClick: () => { },\r\n    onMouseOver: () => { },\r\n    onDragStart: () => { }\r\n}\r\n\r\n\r\n","import React, { useEffect, useState, useLayoutEffect, useRef } from 'react';\r\nimport styles from './style.css'\r\nexport default function Head(props) {\r\n\r\n    const [headRow, setHeadRow] = useState([])\r\n\r\n    useEffect(() => {\r\n        if (typeof props.headRow === \"function\") {\r\n            setHeadRow(props.headRow(props.columnCount))\r\n        }\r\n        else if (Array.isArray(props.headRow)) {\r\n            setHeadRow(props.headRow)\r\n        }\r\n    }, [props.headRow, props.columnCount])\r\n\r\n\r\n\r\n    return (<div  style={{ height: props.dimension, display: \"flex\" }}>\r\n        <div className={styles.row_cell} style={{ width: props.rowTitleWidth, height: props.dimension + \"px\" }} />\r\n        {headRow.map((headitem, i) => {\r\n            return <div key={i} style={{ width: props.dimension + \"px\", height: props.dimension + \"px\" }} className={styles.row_cell}>{headitem}</div>;\r\n        })\r\n        }</div>)\r\n\r\n}","import React, { useEffect, useState } from 'react';\r\nimport styles from './style.css'\r\nimport { makeId, getPosition, getColumnCount, getRowCount,evaluatePosition,resizeBar } from './helpers';\r\nimport reserverReducer from './reserverReducer'\r\nimport useReserver from './useReserver';\r\nimport actionTypes from './actionTypes'\r\nimport Bar from './Bar';\r\nimport Head from './Head';\r\n\r\n\r\n\r\nexport default function Reserver(props) {\r\n\r\n\r\n    const [rowTitles, setRowTitles] = useState([])\r\n\r\n\r\n    const [rowCount, setRowCount] = useState(0);\r\n    const [columnCount, setColumnCount] = useState(0);\r\n\r\n\r\n    useEffect(() => {\r\n       \r\n        setColumnCount(getColumnCount(props.dimension, props.width,props.rowTitleWidth));\r\n    }, [props.width, props.dimension])\r\n\r\n    useEffect(() => {\r\n        setRowCount(getRowCount(props.dimension, props.height))\r\n    }, [props.height, props.dimension])\r\n\r\n\r\n    useEffect(() => {\r\n\r\n        if (typeof props.rowTitles === \"function\") {\r\n            setRowTitles(props.rowTitles())\r\n        } else if (Array.isArray(props.rowTitles)) {\r\n\r\n            setRowTitles(props.rowTitles)\r\n        }\r\n\r\n    }, [props.rowTitles])\r\n\r\n\r\n\r\n\r\n\r\n\r\n    function getContentFromMatrix(row, column) {\r\n\r\n        if (props.content) {\r\n            var r_content = props.content[row];\r\n            var c_content = undefined;\r\n            if (r_content) {\r\n                c_content = r_content[column];\r\n            }\r\n\r\n            if (c_content) {\r\n\r\n                return c_content;\r\n            } else {\r\n                return \"\";\r\n            }\r\n\r\n        }\r\n    }\r\n\r\n\r\n\r\n\r\n\r\n    return <div onMouseLeave={props.mouseLeaveGrid} id=\"grid\" style={{ ...props.style, position: \"relative\" }} >\r\n        <Head headRow={props.headRow} columnCount={columnCount} rowTitleWidth={props.rowTitleWidth} dimension={props.dimension} />\r\n        {[...Array(rowCount)].map((x, r) => {\r\n            return <div className={styles.row} key={r} style={{height:props.dimension,display:\"flex\"}}>\r\n                <div className={styles.row_cell} style={{ width: props.rowTitleWidth, height: props.dimension + \"px\" }} >\r\n                    {rowTitles[r]}\r\n                </div>\r\n                {([...Array(columnCount)].map((x, c) => {\r\n                    return <div onDragOver={(e) => { e.preventDefault(); props.mouseDragOverCell({ cell: { row: r, column: c } }) }}\r\n                        className={styles.row_cell} id={`carribean_r${r}c${c}`}\r\n                        onMouseEnter={() => { props.mouseEnterCell({ dimension: props.dimension, cell: { row: r, column: c } }) }}\r\n                        onMouseDown={() => { props.mouseDownCell({ dimension: props.dimension, cell: { row: r, column: c } }) }}\r\n                        onMouseUp={() => { console.log(\"mouseup\"); props.mouseUpCell({ cell: { row: r, column: c } }) }}\r\n                        onDrop={() => { props.mouseCellDrop({ cell: { row: r, column: c } }); }}\r\n                        style={{ width: props.dimension + \"px\", height: props.dimension + \"px\" }}\r\n                        key={c}>\r\n                        {props.content[`r${r}c${c}`]}\r\n                    </div>\r\n                }\r\n                ))}\r\n            </div>\r\n\r\n        }\r\n        )}\r\n        {\r\n            (typeof props.children === \"function\") && props.children({\r\n\r\n                rowCount: rowCount,\r\n                columnCount: columnCount,\r\n                rowTitleWidth: props.rowTitleWidth,\r\n                dimension: props.dimension\r\n            })\r\n        }\r\n    </div>\r\n}\r\nfunction createBar(dimension,startLocation){\r\n return {\r\n        id: makeId(),\r\n        dimension:dimension,\r\n        style: { background: \"orange\" },\r\n        editing: true, ...startLocation,\r\n        length: 1,\r\n        pointerEvents: \"none\"\r\n    }\r\n}\r\nexport { Bar, reserverReducer, actionTypes, makeId, useReserver,getPosition,evaluatePosition,createBar,resizeBar };\r\n\r\nReserver.defaultProps = {\r\n    initBars: [],\r\n    bars: [],\r\n    tags: [],\r\n    headRow: [],\r\n    rowTitles: [],\r\n    content: {},\r\n    dimension: 20,\r\n    width: 500,\r\n    height: 500,\r\n    rowTitleWidth: 0,\r\n    mouseEnterCell: () => { },\r\n    mouseDownCell: () => { },\r\n    mouseUpCell: () => { },\r\n    mouseDragOverCell: () => { },\r\n    mouseCellDrop: () => { },\r\n    mouseLeaveGrid: () => { }\r\n}","export const bars = [\r\n    { draggable: true, id: \"xx\", length: 13, row: 2, column: 8, className: \"a-bit-tight\", children: \"This is a tag\" },\r\n    { id: \"xy\", length: 4, row: 5, column: 12, style: { background: \"red\" } }\r\n]\r\n\r\n","import React,{useState,useRef} from 'react'\n\nimport Reserver, { Bar, actionTypes, useReserver, reserverReducer, getPosition, evaluatePosition, createBar, resizeBar } from 'react-reserver'\nimport { bars as testBars } from './testData'\nimport 'react-reserver/dist/index.css'\n\n\n\n\nconst App = () => {\n\n  const [headRow, setHeadRow] = useState([123, 1, 2, null, null, 123]);\n  const [content, setContent] = useState({\n    \"r0c0\": <span style={{ background: \"green\", width: \"20px\", height: \"20px\", display: \"block\" }}></span>, \"r2c1\": <span style={{ fontSize: \"10px\" }}>150</span>\n  });\n\n  const [titles, setTitles] = useState([\"Golf Cart 1\", null, \"Golf Cart 2\",]);\n  const [resWidth, setResWidth] = useState(600);\n\n  const { addBar, editBar, doneEditing, deleteBar, bars } = useReserver(reserverReducer, testBars);\n\n  const [widthtitle, setWidthtitle] = useState(80)\n\n  const [height, setHeight] = useState(500)\n  const [dimension, setDimension] = useState(25);\n\n  const gDate = useRef(new Date());\n\n\n  function moveBar(newLocation) {\n\n    let editing = bars.filter((bar) => {\n      return bar.editing;\n    })\n    editing.forEach((bar) => {\n      console.log(\"move\", newLocation)\n      let n = { ...bar, ...newLocation, editing: false };\n      console.log(\"n\", n)\n      editBar(n)\n    })\n\n  }\n\n\n  return <div><Reserver\n  style={{ display: \"inline-block\" }}\n  rowTitles={() => {\n  return titles.map((c, i) => {\n    if (c === null) {\n      return null;\n    }\n    return <button onClick={() => {\n      let ntitles = [...titles];\n      ntitles.push(\"asd\")\n      setTitles(ntitles)\n    }} style={{ background: \"orange\" }}>{i + 1}{c}</button>\n\n  })\n}}\n  rowTitleWidth={widthtitle}\n  headRow={(columnCount) => {\n  \n  var z = [];\n  var x = new Date();\n\n\n\n  for (var i = 0; i < 10; i++) {\n    var y = x.getDate();\n    z.push(y);\n    x.setDate(y + 1)\n\n  }\n\n  return z;\n\n  return headRow.map((r) => {\n    return <div onClick={() => { setWidthtitle(widthtitle + 10) }}>{r}</div>\n\n  })\n}}\n  mouseLeaveGrid={() => { doneEditing() }}\n  mouseUpCell={(props) => {\n\n\n  let tcontent = { ...content }\n  tcontent[`r${props.cell.row}c${props.cell.column}`] = <div style={{ background: \"purple\" }}>test</div>;\n  setContent(tcontent)\n\n  doneEditing()\n}}\n  mouseEnterCell={(props) => { resizeBar(editBar, bars, props) }}\n  mouseDownCell={(props) => {\n\n    console.log(gDate.current.getUTCDate());\n    console.log(props)\n\n  let newbar = createBar(props.dimension, props.cell);\n  addBar(newbar)\n}\n}\n  mouseCellDrop={(props) => { moveBar(props.cell) }}\n  width={document.documentElement.clientWidth}\n  height={height}\n  content={content}\n  dimension={dimension}\n>\n{({ rowCount, rowTitleWidth, dimension }) => {\n\n  return bars.map((bar) => {\n\n    return (rowCount > bar.row) && <Bar key={bar.id}\n      dimension={dimension}\n      onDragStart={() => { editBar({ ...bar, editing: true }) }}\n      onClick={() => { console.log(\"delete\", bar); deleteBar({ id: bar.id }) }}\n\n      onMouseOver={() => { }}\n      {...bar} {...getPosition(rowTitleWidth, bar.row, bar.column, dimension)} >\n      <span style={{ position: \"absolute\" }}>{bar.children}</span>\n    </Bar>\n  })\n\n}}\n\n</Reserver> </div>\n}\n\nexport default App\n","import {  useReducer} from 'react';\r\nimport actionTypes from './actionTypes'\r\nfunction useReserver(reducer, initialState) {\r\n\r\n    const [{ bars, isEditing }, dispatch] = useReducer(reducer, { bars: initialState, isEditing: false, })\r\n\r\n    const addBar = (props) => {\r\n\r\n        return dispatch({ payload: props, type: actionTypes.add })\r\n    }\r\n\r\n    const editBar = (props) => {\r\n        return dispatch({ payload: props, type: actionTypes.edit })\r\n    }\r\n\r\n    const deleteBar = (props) => {\r\n        return dispatch({ payload: props, type: actionTypes.delete })\r\n    }\r\n\r\n\r\n    const doneEditing = (props) => {\r\n        return dispatch({ type: actionTypes.doneEditing })\r\n    }\r\n\r\n    const addToEditing =(props) => {\r\n        return dispatch({payload:props, type: actionTypes.addToEditing })\r\n    }\r\n\r\n\r\n\r\n    return { bars, isEditing, addBar,  editBar, doneEditing, deleteBar , addToEditing}\r\n}\r\n\r\n\r\nexport default useReserver;\r\n\r\n\r\n","import './index.css'\n\nimport React from 'react'\nimport ReactDOM from 'react-dom'\nimport App from './App'\n\nReactDOM.render(<App />, document.getElementById('root'))\n"],"sourceRoot":""}