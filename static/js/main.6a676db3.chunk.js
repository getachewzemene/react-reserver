(this["webpackJsonpreact-reserver-example"]=this["webpackJsonpreact-reserver-example"]||[]).push([[0],{16:function(e,t,n){e.exports=n(30)},17:function(e,t,n){},22:function(e,t,n){},23:function(e,t,n){},30:function(e,t,n){"use strict";n.r(t);n(17);var o=n(0),i=n.n(o),r=n(14),l=n.n(r),a=n(2),c=n(5),s=n(7),u=n(1);function d(){return(d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}var m="_3TtXw",f="_32f2G";function p(e){void 0===e&&(e=15);for(var t="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",o=0;o<e;o++)t+=n.charAt(Math.floor(Math.random()*n.length));return t}var g=function(e,t,n){var o=n>=e&&t>=n;return o&&console.log(e,t,n),o};function h(e){return!(!Number.isInteger(e)||e<0)}function b(e,t,n,o){return{left:e+n*o,top:(t+1)*o}}function E(e,t){return e.filter((function(e){return e.editing})).map((function(e){return d({},e,function(e,t){if(!h(e.column))throw new Error("firstPosition.column expected an integer received "+e.column);if(!h(e.row))throw new Error("firstPosition.row expected an integer received "+e.row);if(!h(t.column))throw new Error("secondPosition.column expected an integer received "+t.column);return{row:e.row,column:e.column,length:t.column-e.column+1}}({column:e.column,row:e.row},t.cell))}))}var v={add:"ADD",edit:"EDIT",delete:"DELETE",addToEditing:"ADD_TO_EDITING",doneEditing:"DONE_EDITING",setBars:"SET_BARS"};var w=function(e,t){return(e=y(e)).collisions[t.id]="",(t=y(t)).collisions[e.id]="",[e,t]},y=function(e){return e.collisions||(e.collisions={}),e},O=function(e,t){return delete(e=y(e)).collisions[t.id],delete(t=y(t)).collisions[e.id],[e,t]};function j(e,t){switch(t.type){case v.edit:var n=[].concat(e.bars),o=n.findIndex((function(e){return t.payload.id===e.id})),i=[].concat(n);i.splice(o,1);var r=function(e,t){var n=d({},t);return[e.map((function(e){if(n.row!==e.row){var t=O(e,n),o=t[0],i=t[1];return n=i,o}var r=e.column+1,l=n.column+1,a=e.column+e.length,c=n.column+n.length;if(g(r,a,l)||g(r,a,c)||g(l,c,a)||g(l,c,r)){var s=w(e,n),u=s[0],d=s[1];return n=d,u}return e})),n]}(i,t.payload),l=r[0],a=r[1];return l.push(a),d({},e,{bars:l});case v.add:var c=[].concat(e.bars);return c.push(t.payload),d({},e,{bars:c,isEditing:!0});case v.setBars:return d({},e,{bars:t.payload.bars});case v.delete:var s=[].concat(e.bars),u=s.findIndex((function(e){return t.payload.id===e.id}));return s.splice(u,1),d({},e,{bars:s});case v.doneEditing:if(e.isEditing){var m=[].concat(e.bars);return m=m.map((function(e){if(e.editing){var t=d({},e.style);return t.pointerEvents="auto",d({},e,{editing:!1,style:t})}return e})),d({},e,{bars:m,isEditing:!1})}return e;case v.mouseDragOver:return d({},e);case v.setBars:return d({},t.bars);default:return console.log("Unhandled type: "+t.type),e}}function x(e){return i.a.createElement("div",{role:"listitem",onDragStart:e.onDragStart,onClick:function(t){e.onClick(t,e)},onMouseOver:function(t){e.onMouseOver(t,e)},onContextMenu:function(t){e.onContextMenu(t)},draggable:e.draggable,style:d({},e.style,{display:"flex",position:"absolute",zIndex:e.zIndex||"100"}),className:e.className},[].concat(Array(e.length&&e.length>0?e.length:1)).map((function(t,n){return i.a.createElement("div",{key:n,style:{width:e.dimension,height:e.dimension,pointerEvents:e.style.pointerEvents}})})),e.children)}function C(e){var t=Object(o.useState)([]),n=t[0],r=t[1];return Object(o.useEffect)((function(){"function"===typeof e.headRow?r(e.headRow(e.columnCount)):Array.isArray(e.headRow)&&r(e.headRow)}),[e.headRow,e.columnCount]),i.a.createElement("div",{role:"columnheader",style:{height:e.dimension,display:"flex"}},i.a.createElement("div",{className:m,style:{width:e.rowTitleWidth,height:e.dimension+"px"}}),n.map((function(t,n){return i.a.createElement("div",{"aria-colindex":n,key:n,style:{width:e.dimension+"px",height:e.dimension+"px"},className:m},t)})))}function D(e){var t=Object(o.useState)([]),n=t[0],r=t[1],l=Object(o.useState)(0),a=l[0],c=l[1],s=Object(o.useState)(0),u=s[0],p=s[1];return Object(o.useEffect)((function(){var t,n,o;p((t=e.dimension,n=e.width,o=e.rowTitleWidth,Math.floor((n-o)/t)))}),[e.width,e.dimension]),Object(o.useEffect)((function(){var t,n;c((t=e.dimension,n=e.height,Math.floor(n/t)))}),[e.height,e.dimension]),Object(o.useEffect)((function(){"function"===typeof e.rowTitles?r(e.rowTitles()):Array.isArray(e.rowTitles)&&r(e.rowTitles)}),[e.rowTitles]),i.a.createElement("div",{role:"grid",onMouseLeave:e.mouseLeaveGrid,style:d({},e.style,{position:"relative"})},i.a.createElement(C,{headRow:e.headRow,columnCount:u,rowTitleWidth:e.rowTitleWidth,dimension:e.dimension}),[].concat(Array(a)).map((function(t,o){return i.a.createElement("div",{role:"rowgroup",className:f,key:o,style:{height:e.dimension,display:"flex"}},i.a.createElement("div",{className:m,style:{width:e.rowTitleWidth,height:e.dimension+"px"}},n[o]),[].concat(Array(u)).map((function(t,n){return i.a.createElement("div",{role:"gridcell","aria-colindex":n,onDragOver:function(t){t.preventDefault(),e.mouseDragOverCell({cell:{row:o,column:n}},t)},className:m,onMouseEnter:function(t){e.mouseEnterCell({dimension:e.dimension,cell:{row:o,column:n}},t)},onMouseDown:function(t){e.mouseDownCell({dimension:e.dimension,cell:{row:o,column:n}},t)},onMouseUp:function(t){e.mouseUpCell({cell:{row:o,column:n}},t)},onDrop:function(t){e.mouseCellDrop({cell:{row:o,column:n}},t)},style:{width:e.dimension+"px",height:e.dimension+"px"},key:n},e.content["r"+o+"c"+n])})))})),i.a.createElement("div",{role:"list"},"function"===typeof e.children&&e.children({rowCount:a,columnCount:u,rowTitleWidth:e.rowTitleWidth,dimension:e.dimension})))}x.defaultProps={dimension:20,onClick:function(){},onMouseOver:function(){},onDragStart:function(){},onContextMenu:function(){}},D.defaultProps={initBars:[],bars:[],tags:[],headRow:[],rowTitles:[],content:{},dimension:20,width:500,height:500,rowTitleWidth:0,mouseEnterCell:function(){},mouseDownCell:function(){},mouseUpCell:function(){},mouseDragOverCell:function(){},mouseCellDrop:function(){},mouseLeaveGrid:function(){}};var T=D;function k(e){return i.a.createElement(T,null)}function S(e){return i.a.createElement("div",{className:e.className,style:{display:e.visible?"block":"none",position:"absolute",left:e.left,top:e.top,zIndex:e.zIndex||1e4}},i.a.createElement("ul",null,"  ",e.children))}const M=e=>i.a.createElement("li",{onClick:e.onClick},e.children);S.defaultProps={visible:!1,left:0,top:0};const N=[{draggable:!0,id:"xx",length:13,row:2,column:8,className:"default-bar",children:"This is a tag"},{id:"xy",length:4,row:5,column:12,style:{background:"red"}}];n(22),n(23),n(24);var B=()=>{Object(o.useEffect)(()=>{console.log(N)},[]);const e=Object(o.useState)({r0c0:i.a.createElement("span",{style:{background:"green",width:"20px",height:"20px",display:"block"}}),r2c1:i.a.createElement("span",{style:{fontSize:"10px"}},"150")}),t=Object(c.a)(e,2),n=t[0],r=t[1],l=Object(o.useState)(["Golf Cart 1",null,"Golf Cart 2"]),m=Object(c.a)(l,2),f=m[0],g=m[1],h=function(e,t){var n=Object(o.useReducer)(e,{bars:t,isEditing:!1}),i=n[0],r=i.bars,l=i.isEditing,a=n[1];return{bars:r,isEditing:l,addBar:function(e){return a({payload:e,type:v.add})},editBar:function(e){return a({payload:e,type:v.edit})},doneEditing:function(e){return a({type:v.doneEditing})},deleteBar:function(e){return a({payload:e,type:v.delete})},addToEditing:function(e){return a({payload:e,type:v.addToEditing})}}}(j,N),w=h.addBar,y=h.editBar,O=h.doneEditing,C=h.deleteBar,D=h.bars,B=Object(o.useState)({}),I=Object(c.a)(B,2),A=I[0],R=I[1],W=Object(o.useState)({visibile:!1,top:0,left:0}),G=Object(c.a)(W,2),P=G[0],z=G[1],L=Object(o.useState)(80),U=Object(c.a)(L,1)[0],_=Object(o.useState)(500),J=Object(c.a)(_,1)[0],X=Object(o.useState)(25),F=Object(c.a)(X,1)[0];return i.a.createElement(s.a,null,i.a.createElement("div",{style:{display:"flex"}},i.a.createElement("ul",{style:{padding:"20px",display:"flex",flex:1,flexDirection:"column"}},i.a.createElement(s.b,{to:"/"},"Start Here"),i.a.createElement(s.b,{to:"/basic"},"Basic"),i.a.createElement(s.b,{to:"/full"},"Full")),i.a.createElement("div",{style:{flex:5}},i.a.createElement(u.c,null,i.a.createElement(u.a,{path:"/full"},i.a.createElement(T,{style:{display:"inline-block"},rowTitles:()=>f.map((e,t)=>null===e?null:i.a.createElement("button",{onClick:()=>{let e=[...f];e.push("asd"),g(e)},style:{background:"orange"}},t+1,e)),rowTitleWidth:U,headRow:e=>{console.log();for(var t=[],n=new Date,o=0;o<e;o++){var i=n.getDate();t.push(i),n.setDate(i+1)}return t},mouseLeaveGrid:()=>{O()},mouseUpCell:e=>{let t=Object(a.a)({},n);t["r".concat(e.cell.row,"c").concat(e.cell.column)]=i.a.createElement("div",{style:{background:"purple"}},"test"),r(t),O()},mouseEnterCell:e=>{E(D,e).forEach(e=>{y(e)})},mouseDownCell:e=>{console.log(e);let t=function(e,t){return d({id:p(),dimension:e,style:{background:"orange",pointerEvents:"none"},editing:!0},t,{length:1})}(e.dimension,e.cell);w(t)},mouseCellDrop:e=>{!function(e){let t=D.filter(e=>e.editing);console.log(t),t.forEach(t=>{console.log("move",e);let n=Object(a.a)(Object(a.a)(Object(a.a)({},t),e),{},{editing:!1});console.log("n",n),y(n)})}(e.cell)},width:document.documentElement.clientWidth,height:J,content:n,dimension:F,mouseDragOverCell:e=>{var t;t=e.cell,D.filter(e=>e.dragging).forEach(e=>{let n=Object(a.a)(Object(a.a)(Object(a.a)({},e),t),{},{editing:!1});y(n)})}},({rowCount:e,rowTitleWidth:t,dimension:n})=>D.map(o=>e>o.row&&i.a.createElement(x,Object.assign({key:o.id},o,{dimension:n,onDragStart:()=>{y(Object(a.a)(Object(a.a)({},o),{},{dragging:!0}))},onContextMenu:e=>{e.preventDefault(),R(o),z({visible:!0,top:e.clientY,left:e.clientX})},onMouseOver:()=>{},style:Object(a.a)(Object(a.a)({},o.style),b(t,o.row,o.column,n))}),i.a.createElement("span",{style:{position:"absolute"}},o.children,o.collisions&&Object.keys(o.collisions).length>0&&i.a.createElement("span",null,"Collision detected"))))),i.a.createElement(S,Object.assign({className:"cmenu"},P),i.a.createElement(M,{onClick:()=>{y(Object(a.a)(Object(a.a)({},A),{},{draggable:!A.draggable})),z({visibile:!1})}},A.draggable?"Disable":"Enable"," Drag"),i.a.createElement(M,{onClick:()=>{C(A),z({visibile:!1})}},"Delete"))),i.a.createElement(u.a,{path:"/basic"},i.a.createElement(k,null)),i.a.createElement(u.a,{path:"/"},"Start here")))))};l.a.render(i.a.createElement(B,null),document.getElementById("root"))}},[[16,1,2]]]);
//# sourceMappingURL=main.6a676db3.chunk.js.map