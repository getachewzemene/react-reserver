(window.webpackJsonp=window.webpackJsonp||[]).push([[28],{100:function(e,n,t){"use strict";t.d(n,"a",(function(){return u})),t.d(n,"b",(function(){return b}));var r=t(0),a=t.n(r);function o(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function s(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function i(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?s(Object(t),!0).forEach((function(n){o(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):s(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function c(e,n){if(null==e)return{};var t,r,a=function(e,n){if(null==e)return{};var t,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)t=o[r],n.indexOf(t)>=0||(a[t]=e[t]);return a}(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)t=o[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}var l=a.a.createContext({}),d=function(e){var n=a.a.useContext(l),t=n;return e&&(t="function"==typeof e?e(n):i(i({},n),e)),t},u=function(e){var n=d(e.components);return a.a.createElement(l.Provider,{value:n},e.children)},p={inlineCode:"code",wrapper:function(e){var n=e.children;return a.a.createElement(a.a.Fragment,{},n)}},m=a.a.forwardRef((function(e,n){var t=e.components,r=e.mdxType,o=e.originalType,s=e.parentName,l=c(e,["components","mdxType","originalType","parentName"]),u=d(t),m=r,b=u["".concat(s,".").concat(m)]||u[m]||p[m]||o;return t?a.a.createElement(b,i(i({ref:n},l),{},{components:t})):a.a.createElement(b,i({ref:n},l))}));function b(e,n){var t=arguments,r=n&&n.mdxType;if("string"==typeof e||r){var o=t.length,s=new Array(o);s[0]=m;var i={};for(var c in n)hasOwnProperty.call(n,c)&&(i[c]=n[c]);i.originalType=e,i.mdxType="string"==typeof e?e:r,s[1]=i;for(var l=2;l<o;l++)s[l]=t[l];return a.a.createElement.apply(null,s)}return a.a.createElement.apply(null,t)}m.displayName="MDXCreateElement"},104:function(e,n,t){"use strict";t.d(n,"a",(function(){return C})),t.d(n,"b",(function(){return _})),t.d(n,"d",(function(){return b})),t.d(n,"e",(function(){return B})),t.d(n,"f",(function(){return g})),t.d(n,"g",(function(){return T}));var r=t(0),a=t.n(r);function o(...e){const[n,t]=Object(r.useState)([]);return Object(r.useEffect)(()=>{if(Array.isArray(e[0]))t(e[0]);else if("function"==typeof e[0]){const n=e.splice(0,1);t(n[0](...e))}},[JSON.stringify(e)]),n}function s(...e){const[n,t]=Object(r.useState)();return Object(r.useEffect)(()=>{if("function"!=typeof e[0])throw"useFunction takes first argument as a function";{const n=e.splice(0,1);t(n[0](...e))}},[JSON.stringify(e)]),n}var i="_style__row_cell__3TtXw",c="_style__row_cell_invisible__2fzm0",l="_style__row__32f2G",d="_style__row_invisible__kbpmo";function u(e=15){let n="";const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";for(let r=0;r<e;r++)n+=t.charAt(Math.floor(Math.random()*t.length));return n}const p=(e,n,t)=>t>=e&&n>=t;function m(e){return!(!Number.isInteger(e)||e<0)}function b(e,n,t,r=0,a=0){return{left:r+n*t,top:e*t+a}}function h(e,n,t){return Math.floor((n-t)/e)}function f(e,n){return Math.floor(n/e)}function g(e,n){return e.map(e=>{if(e.editing){const t=function(e,n){if(!m(e.column))throw new Error("firstPosition.column expected an integer received "+e.column);if(!m(e.row))throw new Error("firstPosition.row expected an integer received "+e.row);if(!m(n.column))throw new Error("secondPosition.column expected an integer received "+n.column);return{row:e.row,column:e.column,length:n.column-e.column+1}}({column:e.column,row:e.row},n.cell);return{...e,...t}}return e})}const O="ADD",v="EDIT",w="DELETE",j="SET_BARS",y="SET_IS_EDITING";const N=(e,n)=>((e=E(e)).collisions[n.id]="",(n=E(n)).collisions[e.id]="",[e,n]),E=e=>(e.collisions||(e.collisions={}),e),x=(e,n)=>(delete(e=E(e)).collisions[n.id],delete(n=E(n)).collisions[e.id],[e,n]);function B(e,n){switch(n.type){case j:return{...e,bars:n.payload};case v:{const t=[...e.bars],r=t.findIndex(e=>n.payload.id===e.id),a=[...t];a.splice(r,1);const[o,s]=function(e,n){let t={...n};return[e.map(e=>{if(t.row===e.row){const n=e.column+1,r=t.column+1,a=e.column+e.length,o=t.column+t.length;if(p(n,a,r)||p(n,a,o)||p(r,o,a)||p(r,o,n)){const[n,r]=N(e,t);return t=r,n}return e}{const[n,r]=x(e,t);return t=r,n}}),t]}(a,n.payload);return o.push(s),{...e,bars:o}}case O:{const t=[...e.bars];return t.push(n.payload),{...e,bars:t}}case w:{const t=[...e.bars],r=t.findIndex(e=>n.payload.id===e.id);return t.splice(r,1),{...e,bars:t}}case y:return{...e,isEditing:n.payload};default:return console.log("Unhandled type: "+n.type),e}}function T(e,n){const[{bars:t,isEditing:a},o]=Object(r.useReducer)(e,{bars:n,isEditing:!1});return{isEditing:a,setIsEditing:e=>o({payload:e,type:y}),bars:t,addBar:e=>o({payload:e,type:O}),editBar:e=>o({payload:e,type:v}),deleteBar:e=>o({payload:e,type:w}),setBars:e=>o({payload:e,type:j})}}function C(e){return a.a.createElement("div",{role:"listitem",onDragStart:e.onDragStart,onClick:n=>{e.onClick(n,e)},onMouseOver:n=>{e.onMouseOver(n,e)},onContextMenu:n=>{e.onContextMenu(n,e)},onMouseEnter:n=>{e.onMouseEnter(n,e)},onMouseLeave:n=>{e.onMouseLeave(n,e)},draggable:e.draggable,style:{...e.style,pointerEvents:e.style.pointerEvents||"none",background:e.style.background||"#0E6BA8",display:"flex",position:"absolute",zIndex:e.zIndex||"100"},className:e.className},[...Array(e.length>0?e.length:1)].map((n,t)=>a.a.createElement("div",{key:t,style:{width:e.dimension,height:e.dimension,pointerEvents:e.style.pointerEvents||"none"}})),e.children)}function k(e){return a.a.createElement("div",{role:"columnheader",className:e.columnTitles.length>0?l:d,style:{height:e.dimension}},a.a.createElement("div",{className:""+(e.rowTitleWidth>0?i:d),style:{width:e.rowTitleWidth,height:e.dimension+"px"}}),e.columnTitles.map((n,t)=>a.a.createElement("div",{"aria-colindex":t,key:t,style:{width:e.dimension+"px",height:e.dimension+"px"},className:i},n)))}function D(e){return a.a.createElement("div",{role:"gridcell","aria-colindex":e.column,onDragOver:n=>{n.preventDefault(),e.onDragOver({cell:{row:e.row,column:e.column}},n)},className:e.className||i,onMouseEnter:n=>{e.onMouseEnter({dimension:e.dimension,cell:{row:e.row,column:e.column}},n)},onMouseDown:n=>{e.onMouseDown({dimension:e.dimension,cell:{row:e.row,column:e.column}},n)},onMouseUp:n=>{e.onMouseUp({cell:{row:e.row,column:e.column}},n)},onDrop:n=>{e.onDrop({cell:{row:e.row,column:e.column}},n)},style:{overflow:"hidden",width:e.dimension+"px",height:e.dimension+"px"}},e.children)}function M(e){const n=s(f,e.dimension,e.height),t=s(h,e.dimension,e.width,e.rowTitleWidth),r=o(e.rowTitles),d=o(e.columnTitles,t);return a.a.createElement("div",{id:e.id,className:e.className,role:"grid",onMouseLeave:e.mouseLeaveGrid,style:{...e.style,position:"relative"}},a.a.createElement(k,{columnTitles:d,columnCount:t,rowTitleWidth:e.rowTitleWidth,dimension:e.dimension}),[...Array(n)].map((n,o)=>a.a.createElement("div",{role:"rowgroup",className:l,key:o,style:{height:e.dimension,display:"flex"}},a.a.createElement("div",{className:r.length>0?i:c,style:{width:e.rowTitleWidth,height:e.dimension+"px",overflow:"hidden"}},r[o]),[...Array(t)].map((n,t)=>a.a.createElement(D,{key:`r${o}c${t}`,onMouseDown:e.mouseDownCell,onMouseEnter:e.mouseEnterCell,onMouseUp:e.mouseUpCell,onDrop:e.mouseDropCell,onDragOver:e.mouseDragOverCell,dimension:e.dimension,className:e.cellClassName,column:t,row:o},e.content[`r${o}c${t}`])))),a.a.createElement("div",{role:"list"},"function"==typeof e.children&&e.children({rowCount:n,columnCount:t,rowTitleWidth:e.rowTitleWidth,dimension:e.dimension,columnTitleHeight:d.length>0?e.dimension:0}),Array.isArray(e.children)&&e.children))}function _(e,n){return{id:u(),dimension:e,editing:!0,...n}}C.defaultProps={style:{},dimension:20,onClick:()=>{},onMouseOver:()=>{},onDragStart:()=>{},onContextMenu:()=>{},onMouseEnter:()=>{},onMouseLeave:()=>{},length:1},M.defaultProps={columnTitles:[],rowTitles:[],content:{},dimension:20,width:500,height:500,rowTitleWidth:20,mouseEnterCell:()=>{},mouseDownCell:()=>{},mouseUpCell:()=>{},mouseDragOverCell:()=>{},mouseDropCell:()=>{},mouseLeaveGrid:()=>{}},n.c=M},97:function(e,n,t){"use strict";t.r(n),t.d(n,"frontMatter",(function(){return d})),t.d(n,"metadata",(function(){return u})),t.d(n,"rightToc",(function(){return p})),t.d(n,"default",(function(){return b}));var r=t(2),a=t(6),o=t(0),s=t.n(o),i=t(100),c=t(104);t(47);function l(e){const{bars:n,isEditing:t,setIsEditing:a,addBar:o,setBars:i,editBar:l}=Object(c.g)(c.e,[]);return s.a.createElement(c.c,{mouseDownCell:e=>{const n=Object(c.b)(e.dimension,e.cell);o(n)},mouseEnterCell:e=>{const t=Object(c.f)(n,e);i(t)},mouseUpCell:()=>{const e=n.map(e=>e.editing?{...e,editing:!1,style:{pointerEvents:"auto"}}:e);i(e),a(!1)}},n.map(e=>s.a.createElement(c.a,Object(r.a)({key:e.id},e,{style:{...e.style,...Object(c.d)(e.row,e.column,e.dimension)}}))))}var d={id:"basic",title:"Basic",sidebar_label:"Basic"},u={unversionedId:"basic",id:"basic",isDocsHomePage:!1,title:"Basic",description:"This is the most basic example.",source:"@site/docs\\basic.mdx",permalink:"/react-reserver/docs/basic",sidebar_label:"Basic",sidebar:"docs",previous:{title:"Getting Started",permalink:"/react-reserver/docs/"},next:{title:"Basic++",permalink:"/react-reserver/docs/basicplusplus"}},p=[],m={rightToc:p};function b(e){var n=e.components,t=Object(a.a)(e,["components"]);return Object(i.b)("wrapper",Object(r.a)({},m,t,{components:n,mdxType:"MDXLayout"}),Object(i.b)("p",null,"This is the most basic example.\nA grid, 500px wide and 500px high is created, since those are the default props."),Object(i.b)("div",{className:"admonition admonition-tip alert alert--success"},Object(i.b)("div",Object(r.a)({parentName:"div"},{className:"admonition-heading"}),Object(i.b)("h5",{parentName:"div"},Object(i.b)("span",Object(r.a)({parentName:"h5"},{className:"admonition-icon"}),Object(i.b)("svg",Object(r.a)({parentName:"span"},{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"}),Object(i.b)("path",Object(r.a)({parentName:"svg"},{fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"})))),"tip")),Object(i.b)("div",Object(r.a)({parentName:"div"},{className:"admonition-content"}),Object(i.b)("p",{parentName:"div"},"Click and drag on any square in the grid to create a new bar"))),Object(i.b)(l,{mdxType:"Basic"}),Object(i.b)("pre",null,Object(i.b)("code",Object(r.a)({parentName:"pre"},{className:"language-jsx"}),"import React from 'react'\nimport 'react-reserver/dist/index.css'\nimport Reserver, \n{ Bar, \nuseReserver,\nreserverReducer,\ncreateBar, \ngetPosition, \nresizeBar } from 'react-reserver'\n\nexport default function Basic(props) {\n    const { bars, addBar, setBars } = useReserver(reserverReducer, [])    \n    return <Reserver \n        mouseDownCell={(props) => {\n            const newbar = createBar(props.dimension, props.cell);\n            addBar(newbar)\n        }}\n        mouseEnterCell={(props) => {\n            const nBars = resizeBar(bars, props)\n            setBars(nBars)\n        }}\n        mouseUpCell={() => {  \n            const dBars = bars.map((bar) => {\n                if (bar.editing) {\n                    return { ...bar, editing: false }\n                }\n                return bar;\n            })\n            setBars(dBars)\n        }}\n    >\n        {\n            bars.map((bar) => {\n            return <Bar \n            key={bar.id}\n             {...bar} \n            style={{ ...getPosition(bar.row, bar.column, bar.dimension) }} /> })\n        }\n    </Reserver>\n")),Object(i.b)("p",null,"So whats going on here?\nIn order to allow you to control the state of Reserver we use a reducer"),Object(i.b)("pre",null,Object(i.b)("code",Object(r.a)({parentName:"pre"},{className:"language-jsx"})," const { bars, addBar, setBars } = useReserver(reserverReducer, [])   \n")),Object(i.b)("p",null,Object(i.b)("strong",{parentName:"p"},"useReserver")," is a the hook.\n",Object(i.b)("strong",{parentName:"p"},"reserverReducer")," is the reducer. "),Object(i.b)("p",null,"The hook returns ",Object(i.b)("strong",{parentName:"p"},"bars")," which is an array holding the current bars.\n",Object(i.b)("strong",{parentName:"p"},"addBar")," takes a single object to add to the array and ",Object(i.b)("strong",{parentName:"p"},"setBars")," sets all the bars.\nThere are more functions returned from the hook. We will start with these. "),Object(i.b)("pre",null,Object(i.b)("code",Object(r.a)({parentName:"pre"},{className:"language-jsx"}),"mouseDownCell={(props) => {\n            const newbar = createBar(props.dimension, props.cell);\n            addBar(newbar)\n        }}\n")),Object(i.b)("p",null,Object(i.b)("strong",{parentName:"p"},"mouseDownCell")," is a prop that takes function which runs when you click down on one of the cells.\nThe prop passes a dimension which is defined in an initial props of Reserver. "),Object(i.b)("p",null,"The dimension defines how large each cell is in pixels.\nThe cell is an object that looks like this "),Object(i.b)("pre",null,Object(i.b)("code",Object(r.a)({parentName:"pre"},{className:"language-json"})," { row: r, column: c }\n")),Object(i.b)("p",null,"dimension and cell get passed to the function ",Object(i.b)("strong",{parentName:"p"},"createBar")),Object(i.b)("p",null,"createBar is a helper function that takes dimension and cell as arguments and returns an object containing\na new id, the dimension, editing as a boolean set to true, the location which is the cell.\nAll these get passed as props into the bar and are necessary as basic properties for the bars array. "),Object(i.b)("p",null,Object(i.b)("strong",{parentName:"p"},"addBar")," is a function that takes an object representing bar and adds it to the array bars."),Object(i.b)("pre",null,Object(i.b)("code",Object(r.a)({parentName:"pre"},{className:"language-jsx"}),"    mouseEnterCell={(props) => {\n            const nBars = resizeBar(bars, props)\n            setBars(nBars)\n        }}\n")),Object(i.b)("p",null,Object(i.b)("strong",{parentName:"p"},"mouseEnterCell")," is a prop that takes a function which receives an object with dimension and cell and runs whenever a mouse hovers over a cell."),Object(i.b)("p",null,Object(i.b)("strong",{parentName:"p"},"resizeBar")," is a function that takes all bars and the props and calculates the new size of the bars.\nIt does this by finding all the bars that have the property ",Object(i.b)("strong",{parentName:"p"},"editing = true")," and editing them accordinly. "),Object(i.b)("pre",null,Object(i.b)("code",Object(r.a)({parentName:"pre"},{className:"language-jsx"}),"   mouseUpCell={() => {  \n            const dBars = bars.map((bar) => {\n                if (bar.editing) {\n                    return { ...bar, editing: false }\n                }\n                return bar;\n            })\n            setBars(dBars)\n        }}\n")),Object(i.b)("p",null,Object(i.b)("strong",{parentName:"p"},"mouseUpCell")," is a prop that takes a function which runs when there is a onMouseUp over a cell.\nHere, the bars are mapped over and all the edited bars that have true on ",Object(i.b)("strong",{parentName:"p"},"editing")," becomes false. "),Object(i.b)("pre",null,Object(i.b)("code",Object(r.a)({parentName:"pre"},{className:"language-jsx"}),"     {\n            bars.map((bar) => {\n            return <Bar \n            key={bar.id}\n             {...bar} \n            style={{ ...getPosition(bar.row, bar.column, bar.dimension) }} /> })\n        }\n")),Object(i.b)("p",null,"The children of the Reserver component are an array of the component Bar."),Object(i.b)("p",null,Object(i.b)("strong",{parentName:"p"},"getPosition")," is a helper function that takes the row,column and dimension and calculates the absolute position (top and left) of the bar and passes it into style. "),Object(i.b)("p",null,"Thats it! Thats the most basic code that allows you to run the example. "),Object(i.b)("div",{className:"admonition admonition-caution alert alert--warning"},Object(i.b)("div",Object(r.a)({parentName:"div"},{className:"admonition-heading"}),Object(i.b)("h5",{parentName:"div"},Object(i.b)("span",Object(r.a)({parentName:"h5"},{className:"admonition-icon"}),Object(i.b)("svg",Object(r.a)({parentName:"span"},{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"}),Object(i.b)("path",Object(r.a)({parentName:"svg"},{fillRule:"evenodd",d:"M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"})))),"caution")),Object(i.b)("div",Object(r.a)({parentName:"div"},{className:"admonition-content"}),Object(i.b)("p",{parentName:"div"},"This is not the best way to use Reserver. Its only an example to simplify the process of getting started. "))),Object(i.b)("div",{className:"admonition admonition-tip alert alert--success"},Object(i.b)("div",Object(r.a)({parentName:"div"},{className:"admonition-heading"}),Object(i.b)("h5",{parentName:"div"},Object(i.b)("span",Object(r.a)({parentName:"h5"},{className:"admonition-icon"}),Object(i.b)("svg",Object(r.a)({parentName:"span"},{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"}),Object(i.b)("path",Object(r.a)({parentName:"svg"},{fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"})))),"tip")),Object(i.b)("div",Object(r.a)({parentName:"div"},{className:"admonition-content"}),Object(i.b)("p",{parentName:"div"},"Go to Basic++ to see a more robust example of how to use Reserver"))))}b.isMDXComponent=!0}}]);